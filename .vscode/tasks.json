{
    "version": "2.0.0",
    "tasks": [
        {
            "type": "cmake",
            "label": "CMake: build romp",
            "detail": "use CMake to build the romp codegen tool",
            "command": "build",
            "targets": [
                "romp"
            ],
            "group": "build",
            "problemMatcher": []
        },
        {
            "type": "cmake",
            "label": "CMake: configure romp",
            "detail": "use CMake to configure the romp codegen tool for building",
            "command": "configure",
            "targets": [
                "romp"
            ],
            "group": "build",
            "problemMatcher": []
        },
        {
            "type": "shell",
            "label": "make: build romp",
            "detail": "use make to build the romp tool (must have configured cmake first & built/have librumur)",
            "group": "build",
            "command": "make",
            "args": [
                "romp"
            ],
            "dependsOn": [
                "CMake: configure romp",
                "cd: build/romp"
            ],
            "dependsOrder": "sequence"
        },
        {
            "type": "shell",
            "label": "cd: build/romp",
            "detail": "cd to the romp build dir",
            "group": "build",
            "command": "cd",
            "args": [
                "${workspaceFolder}/build/romp"
            ]
        },
        {
            "type": "shell",
            "label": "romp: generate german test",
            "detail": "use make to build the romp tool (must have configured cmake first & built/have librumur)",
            "group": "build",
            "command": "${workspaceFolder}/build/romp/romp",
            "args": [
                "--do-measure",
                "--simple-trace",
                "--output",
                "${workspaceFolder}/romp/tests/german.m.test.cpp",
                "${workspaceFolder}/romp/tests/german.m"
            ],
            "dependsOn": [
                "CMake: build romp"
            ]
        },
        {
            "type": "shell",
            "label": "build german test",
            "detail": "use make to build the romp tool (must have configured cmake first & built/have librumur)",
            "group": "build",
            "command": "g++",
            "args": [
                "-g",
                "-pthread",
                "-o",
                "${workspaceFolder}/romp/tests/german.m.test",
                "${workspaceFolder}/romp/tests/german.m.test.cpp"
            ],
            "dependsOn": [
                "romp: generate german test"
            ]
        },
        {
            "type": "shell",
            "label": "romp: generate german test [no-build]",
            "detail": "use make to build the romp tool (must have configured cmake first & built/have librumur)",
            "group": "build",
            "command": "${workspaceFolder}/build/romp/romp",
            "args": [
                "--do-measure",
                "--simple-trace",
                "--output",
                "${workspaceFolder}/romp/tests/german.m.test.cpp",
                "${workspaceFolder}/romp/tests/german.m"
            ]
        },
        {
            "type": "shell",
            "label": "build german test [no-build]",
            "detail": "use make to build the romp tool (must have configured cmake first & built/have librumur)",
            "group": "build",
            "command": "g++",
            "args": [
                "-g",
                "-pthread",
                "-o",
                "${workspaceFolder}/romp/tests/german.m.test",
                "${workspaceFolder}/romp/tests/german.m.test.cpp"
            ],
            "dependsOn": [
                "romp: generate german test [no-build]"
            ]
        },
        {
            "label": "romp: gen active file",
            "command": "${workspaceFolder}/build/romp/romp",
            "args": [
                "-lca",
                "--do-measure",
                "--simple-trace",
                "--output",
                "${file}.test.cpp",
                "${file}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": "build",
            "detail": "Task generated by Debugger."            
        },
        {
            "label": "C/C++: g++ build active murphi file",
            "command": "/usr/bin/g++",
            "args": [
                "-fdiagnostics-color=always",
                "-g",
                "-pthread",
                "${file}.test.cpp",
                "-o",
                "${file}.test"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": "build",
            "detail": "Task generated by Debugger.",
            "dependsOn": [
                "romp: gen active file"
            ]
        },
        {
            "type": "cppbuild",
            "label": "C/C++: g++ build active C++ file",
            "command": "/usr/bin/g++",
            "args": [
                "-fdiagnostics-color=always",
                "-g",
                "-pthread",
                "${file}",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": "build",
            "detail": "Task generated by Debugger."
        },
    ]
}